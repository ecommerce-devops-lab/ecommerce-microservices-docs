graph LR
    subgraph "Terraform Modules Architecture"
        subgraph "Module 1: GCP Infrastructure"
            GCP_MOD["ğŸ—ï¸ GCP Infrastructure<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Google APIs<br/>â€¢ VPC Network<br/>â€¢ GKE Cluster<br/>â€¢ Node Pool<br/>â€¢ Network Security"]
        end
        
        subgraph "Module 2: Kubernetes Base"
            K8S_MOD["âš™ï¸ Kubernetes Base<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Namespace Creation<br/>â€¢ ConfigMaps<br/>â€¢ Service Configuration<br/>â€¢ Environment Variables"]
        end
        
        subgraph "Module 3: Monitoring"
            MON_MOD["ğŸ“Š Monitoring<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Zipkin Deployment<br/>â€¢ Zipkin Service<br/>â€¢ Health Checks<br/>â€¢ Tracing Setup"]
        end
        
        subgraph "Module 4: Microservices"
            MICRO_MOD["ğŸš€ Microservices<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Service Discovery<br/>â€¢ Cloud Config<br/>â€¢ API Gateway<br/>â€¢ Business Services<br/>â€¢ Load Balancers"]
        end
    end
    
    subgraph "Deployment Flow"
        STEP1["1ï¸âƒ£ Infrastructure<br/>Setup GCP resources"]
        STEP2["2ï¸âƒ£ Kubernetes<br/>Configure base layer"]
        STEP3["3ï¸âƒ£ Monitoring<br/>Deploy observability"]
        STEP4["4ï¸âƒ£ Applications<br/>Deploy microservices"]
    end
    
    subgraph "Key Resources by Module"
        subgraph "GCP Resources"
            GCP_LIST["â€¢ container.googleapis.com<br/>â€¢ compute.googleapis.com<br/>â€¢ VPC + Subnet<br/>â€¢ GKE Cluster<br/>â€¢ Node Pool (1-3 nodes)"]
        end
        
        subgraph "K8s Resources"
            K8S_LIST["â€¢ ecommerce namespace<br/>â€¢ ecommerce-config ConfigMap<br/>â€¢ cloud-config-files ConfigMap<br/>â€¢ Service URLs configuration"]
        end
        
        subgraph "Monitoring Resources"
            MON_LIST["â€¢ Zipkin Deployment<br/>â€¢ Zipkin LoadBalancer Service<br/>â€¢ Health/Readiness Probes<br/>â€¢ Resource Limits"]
        end
        
        subgraph "Application Resources"
            MICRO_LIST["â€¢ 10 Microservice Deployments<br/>â€¢ 10 Kubernetes Services<br/>â€¢ 3 LoadBalancer Services<br/>â€¢ 7 ClusterIP Services<br/>â€¢ Auto-scaling configuration"]
        end
    end
    
    %% Module Dependencies
    GCP_MOD --> K8S_MOD
    K8S_MOD --> MON_MOD
    MON_MOD --> MICRO_MOD
    
    %% Flow Dependencies
    STEP1 --> STEP2
    STEP2 --> STEP3
    STEP3 --> STEP4
    
    %% Module to Resource Mapping
    GCP_MOD -.-> GCP_LIST
    K8S_MOD -.-> K8S_LIST
    MON_MOD -.-> MON_LIST
    MICRO_MOD -.-> MICRO_LIST
    
    %% Styling
    classDef moduleStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    classDef stepStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef resourceStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    
    class GCP_MOD,K8S_MOD,MON_MOD,MICRO_MOD moduleStyle
    class STEP1,STEP2,STEP3,STEP4 stepStyle
    class GCP_LIST,K8S_LIST,MON_LIST,MICRO_LIST resourceStyle 